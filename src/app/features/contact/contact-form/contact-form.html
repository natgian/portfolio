<div class="form-container">
  <form [formGroup]="contactForm" (ngSubmit)="handleSubmit()">
    <div
      class="field"
      [class.no-bottom-border]="hoverStates[0] || focusStates[0]"
      (mouseenter)="onMouseEnter(0)"
      (mouseleave)="onMouseLeave(0)"
      (focusin)="onFocus(0)"
      (focusout)="onBlur(0)"
    >
      <label for="name">{{ 'home.contact.fields.name.label' | translate }}</label>
      <input
        type="text"
        id="name"
        [placeholder]="'home.contact.fields.name.placeholder' | translate"
        formControlName="name"
      />
      <div class="input-feedback">
        @if(name?.invalid && name?.touched) {
        <span class="invalid-message">{{ 'home.contact.fields.name.error' | translate }}</span>
        }
      </div>
    </div>

    <div
      class="field"
      [class.no-bottom-border]="hoverStates[1] || focusStates[1]"
      (mouseenter)="onMouseEnter(1)"
      (mouseleave)="onMouseLeave(1)"
      (focusin)="onFocus(1)"
      (focusout)="onBlur(1)"
    >
      <label for="email">{{ 'home.contact.fields.email.label' | translate }}</label>
      <input
        type="email"
        id="email"
        [placeholder]="'home.contact.fields.email.placeholder' | translate"
        formControlName="email"
      />
      <div class="input-feedback">
        @if(email?.invalid && email?.touched) {
        <span class="invalid-message">{{ 'home.contact.fields.email.error' | translate }}</span>
        }
      </div>
    </div>

    <div
      class="field"
      [class.no-bottom-border]="hoverStates[2] || focusStates[2]"
      (mouseenter)="onMouseEnter(2)"
      (mouseleave)="onMouseLeave(2)"
      (focusin)="onFocus(2)"
      (focusout)="onBlur(2)"
    >
      <label for="message">{{ 'home.contact.fields.message.label' | translate }}</label>
      <textarea
        name="message"
        id="message"
        rows="2"
        formControlName="message"
        [placeholder]="'home.contact.fields.message.placeholder' | translate"
      ></textarea>
      <div class="input-feedback">
        @if(message?.invalid && message?.touched) {
        <span class="invalid-message">{{ 'home.contact.fields.message.error' | translate }}</span>
        }
      </div>
    </div>

    <div class="checkbox-container">
      <label for="checkbox" class="checkbox-label">
        <input type="checkbox" name="checkbox" id="checkbox" formControlName="checkbox" />
        <img src="/img/ui-elements/check.png" alt="checked" />
      </label>
      <span
        >{{ 'home.contact.policy.prefix' | translate }}
        <a [href]="legalNoticeUrl" target="_blank" rel="noopener">{{
          'home.contact.policy.link' | translate
        }}</a>
        {{ 'home.contact.policy.suffix' | translate }}
      </span>
    </div>

    <div class="input-feedback">
      @if(checkbox?.invalid && checkbox?.touched) {
      <span class="invalid-message">{{ 'home.contact.policy.error' | translate }}</span>
      }
    </div>

    <app-button
      type="submit"
      [buttonText]="'home.contact.submit' | translate"
      [variant]="isDarkBackground ? 'light' : 'dark'"
      [disabled]="contactForm.invalid || isSubmitting"
    ></app-button>

    <div class="success-message-wrapper">
      <span class="success-message" [class.active]="showSuccessMessage" role="status">
        {{ 'home.contact.success' | translate }}
      </span>
    </div>
  </form>
</div>
